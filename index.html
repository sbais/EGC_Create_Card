<!DOCTYPE html>
<html>
	<head>
		<title>Hello Canvas!</title>
	</head>

	<body>
		<div id="bd-wrapper">

			<h2>Create your own template</h2>

			<div id="canvas-wrapper" style="position:relative;width:704px;float:left;">
				<div id="canvas-container" style="width: 700px; height: 400px; position: relative; -webkit-user-select: none;">
					<canvas id="canvas" width="650px" height="400px" style="position: absolute; width: 700px; height: 400px; left: 0px; top: 0px; -webkit-user-select: none; border:1px solid black;"></canvas>
				</div>
			</div>

			<div class="tabs">

				<ul class="tab-links">
    				<li class="active"><a href="#simple">Simple</a></li>
    				<li><a href="#controls">Controls</a></li>
  				</ul>

				<div class="tab-content">

    				<div class="tab active" id="simple">

						<p>Add <strong>shapes</strong> to canvas:</p>
      					<p>
							<button type="button" onclick="addRect()">Rectangle</button>
							<button type="button" onclick="addCircle()">Circle</button>
							<button type="button" onclick="addTraingle()">Triangle</button>
						</p>

      					<p>Add <strong>images</strong> to canvas:</p>
      					<p>
							<button type="button" onclick="addBirthday()"><img src="birthday.png" id="birthday" width="150px"></button>
							<button type="button" onclick="addAnniversary()"><img src="anniversary.png" id="anniversary" width="150px"></button>
							<button type="button" onclick="addUniversal()"><img src="universal.png" id="universal" width="150px"></button><br>
							<button type="button" onclick="addChritsmas()"><img src="christmas.png" id="chritsmas" width="150px"></button>
							<button type="button" onclick="addHalloween()"><img src="halloween.png" id="halloween" width="150px"></button>
							<button type="button" onclick="addBaby()"><img src="baby.png" id="baby" width="150px"></button>
						</p>

						<p>Add <strong>text</strong> to canvas:</p>
      					<p>
      						<button type="button" onclick="addText()">Text</button>
      					</p>

      				</div>

      				<div class="tab" id="controls">
      					<p>
      						<button type="button" onclick="Clear()" style="background-color:red">Clear Canvas</button>
      					</p>

      					<p>
      						<button type="button" onclick="Remove()" style="background-color:lightgreen">Remove selected object</button>
      					</p>

      					<!--<p>Enter the <strong>free drawing mode</strong>:</p>
      					<p>
      						<button id="drawing-mode">Cancel drawing mode</button>
  							<button id="clear-canvas">Clear</button><br>
      					</p>
      					<div id="drawing-mode-options">
      						<label for="drawing-mode-selector">Mode:</label>
    						<select id="drawing-mode-selector">
      							<option>Pencil</option>
      							<option>Circle</option>
      							<option>Spray</option>
      							<option>Pattern</option>
      							<option>hline</option>
      							<option>vline</option>
      							<option>square</option>
      							<option>diamond</option>
      							<option>texture</option>
    						</select><br>

    						<label for="drawing-line-width">Line width:</label>
    						<input type="range" value="30" min="0" max="150" id="drawing-line-width"><br>

   							<label for="drawing-color">Line color:</label>
    						<input type="color" value="#005E7A" id="drawing-color"><br>

    						<label for="drawing-shadow-color">Shadow color:</label>
    						<input type="color" value="#005E7A" id="drawing-shadow-color"><br>

    						<label for="drawing-shadow-width">Shadow width:</label>
    						<input type="range" value="0" min="0" max="50" id="drawing-shadow-width"><br>

    						<label for="drawing-shadow-offset">Shadow offset:</label>
    						<input type="range" value="0" min="0" max="50" id="drawing-shadow-offset">	
      					</div>-->
      				</div>
				</div>
			</div>

			<!--<div id="color-opacity-controls" ng-show="canvas.getActiveObject()">
				<label for="opacity">Opacity: </label>
    			<input value="100" type="range" bind-value-to="opacity">

    			<label for="color" style="margin-left:10px">Color: </label>
    			<input type="color" style="width:40px" bind-value-to="fill">
			</div>-->

		</div>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.1.0/fabric.all.min.js" ></script>
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  		<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
		<link href='http://fonts.googleapis.com/css?family=Plaster' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Engagement' rel='stylesheet' type='text/css'>

		<script>

			var canvas = new fabric.Canvas('canvas'/*, {isDrawingMode: true}*/);

			jQuery(document).ready(function() {
    			jQuery('.tabs .tab-links a').on('click', function(e)  {
        			var currentAttrValue = jQuery(this).attr('href');
 
        			// Show/Hide Tabs
        			jQuery('.tabs ' + currentAttrValue).show().siblings().hide();
 
        			// Change/remove current tab to active
        			jQuery(this).parent('li').addClass('active').siblings().removeClass('active');
 
        			e.preventDefault();
    			});
			});

			function addRect(){
				var rect = new fabric.Rect({
					left: 100, top: 100, fill: 'red', width: 20, height: 20, angle: 45
				});

				canvas.add(rect);
			}

			function addCircle(){
				var circle = new fabric.Circle({
					radius: 20, fill: 'green', left: 100, top: 100
				});

				canvas.add(circle);
			}

			function addTraingle(){
				var triangle = new fabric.Triangle({
					width: 20, height: 30, fill: 'blue', left: 50, top: 50
				});

				canvas.add(triangle);
			}

			function addBirthday(){
				/*fabric.Image.fromURL('birthday.png', function(oImg){
					canvas.add(oImg);
				});*/
				var imgElementB = document.getElementById('birthday');
				var imgInstanceB = new fabric.Image(imgElementB,{
					left: 100,
  					top: 100,
  					angle: 30,
  					opacity: 0.85
				});
				canvas.add(imgInstanceB);
			}

			function addAnniversary(){
				var imgElementA = document.getElementById('anniversary');
				var imgInstanceA = new fabric.Image(imgElementA,{
					left: 100,
  					top: 100,
  					angle: 30,
  					opacity: 0.85
				});
				canvas.add(imgInstanceA);
			}

			function addUniversal(){
				var imgElementU = document.getElementById('universal');
				var imgInstanceU = new fabric.Image(imgElementU,{
					left: 100,
  					top: 100,
  					angle: 30,
  					opacity: 0.85
				});
				canvas.add(imgInstanceU);
			}

			function addChritsmas(){
				var imgElementC = document.getElementById('chritsmas');
				var imgInstanceC = new fabric.Image(imgElementC,{
					left: 100,
  					top: 100,
  					angle: 30,
  					opacity: 0.85
				});
				canvas.add(imgInstanceC);
			}

			function addHalloween(){
				var imgElementH = document.getElementById('halloween');
				var imgInstanceH = new fabric.Image(imgElementH,{
					left: 100,
  					top: 100,
  					angle: 30,
  					opacity: 0.85
				});
				canvas.add(imgInstanceH);
			}

			function addBaby(){
				var imgElementN = document.getElementById('baby');
				var imgInstanceN = new fabric.Image(imgElementN,{
					left: 100,
  					top: 100,
  					angle: 30,
  					opacity: 0.85
				});
				canvas.add(imgInstanceN);
			}

			function addText(){
				var text = new fabric.Text("A Gift Card", {left:100, top:100});
				canvas.add(text);
			}

			function Clear(){
				if (confirm('Are you sure?')) {
					canvas.clear();
				}
			}

			function Remove(){
				var activeObject = canvas.getActiveObject();
				if (activeObject) {
					canvas.remove(activeObject);
				}
			}

			/*fabric.Object.prototype.transparentCorners = false;

  			var drawingModeEl = $('drawing-mode'),
      			drawingOptionsEl = $('drawing-mode-options'),
      			drawingColorEl = $('drawing-color'),
      			drawingShadowColorEl = $('drawing-shadow-color'),
      			drawingLineWidthEl = $('drawing-line-width'),
      			drawingShadowWidth = $('drawing-shadow-width'),
      			drawingShadowOffset = $('drawing-shadow-offset'),
      			clearEl = $('clear-canvas');

  			clearEl.onclick = function() { canvas.clear() };

  			drawingModeEl.onclick = function() {
    			canvas.isDrawingMode = !canvas.isDrawingMode;
    			if (canvas.isDrawingMode) {
     				drawingModeEl.innerHTML = 'Cancel drawing mode';
      				drawingOptionsEl.style.display = '';
    			}
    			else {
      				drawingModeEl.innerHTML = 'Enter drawing mode';
      				drawingOptionsEl.style.display = 'none';
    			}
  			};

  			if (fabric.PatternBrush) {
    			var vLinePatternBrush = new fabric.PatternBrush(canvas);
    			vLinePatternBrush.getPatternSrc = function() {

      				var patternCanvas = fabric.document.createElement('canvas');
      				patternCanvas.width = patternCanvas.height = 10;
      				var ctx = patternCanvas.getContext('2d');

      				ctx.strokeStyle = this.color;
      				ctx.lineWidth = 5;
      				ctx.beginPath();
      				ctx.moveTo(0, 5);
      				ctx.lineTo(10, 5);
      				ctx.closePath();
      				ctx.stroke();

      				return patternCanvas;
    			};

	    		var hLinePatternBrush = new fabric.PatternBrush(canvas);
	    		hLinePatternBrush.getPatternSrc = function() {

	      			var patternCanvas = fabric.document.createElement('canvas');
	      			patternCanvas.width = patternCanvas.height = 10;
	      			var ctx = patternCanvas.getContext('2d');

				    ctx.strokeStyle = this.color;
				    ctx.lineWidth = 5;
				    ctx.beginPath();
				    ctx.moveTo(5, 0);
				    ctx.lineTo(5, 10);
				    ctx.closePath();
				    ctx.stroke();

	      			return patternCanvas;
	    		};

			    var squarePatternBrush = new fabric.PatternBrush(canvas);
			    squarePatternBrush.getPatternSrc = function() {

	      			var squareWidth = 10, squareDistance = 2;

				    var patternCanvas = fabric.document.createElement('canvas');
				    patternCanvas.width = patternCanvas.height = squareWidth + squareDistance;
				    var ctx = patternCanvas.getContext('2d');

				    ctx.fillStyle = this.color;
				    ctx.fillRect(0, 0, squareWidth, squareWidth);

				    return patternCanvas;
	    		};

			    var diamondPatternBrush = new fabric.PatternBrush(canvas);
			    diamondPatternBrush.getPatternSrc = function() {

				    var squareWidth = 10, squareDistance = 5;
				    var patternCanvas = fabric.document.createElement('canvas');
				    var rect = new fabric.Rect({
				        width: squareWidth,
				        height: squareWidth,
				        angle: 45,
				        fill: this.color
	      			});

				    var canvasWidth = rect.getBoundingRectWidth();

				    patternCanvas.width = patternCanvas.height = canvasWidth + squareDistance;
				    rect.set({ left: canvasWidth / 2, top: canvasWidth / 2 });

				    var ctx = patternCanvas.getContext('2d');
				    rect.render(ctx);

				    return patternCanvas;
	    		};

			    var img = new Image();
			    img.src = 'honey_im_subtle.png';

			    var texturePatternBrush = new fabric.PatternBrush(canvas);
			    texturePatternBrush.source = img;
  			}

			$('drawing-mode-selector').onchange = function() {

				if (this.value === 'hline') {
			    	canvas.freeDrawingBrush = vLinePatternBrush;
			    }
			    else if (this.value === 'vline') {
			      	canvas.freeDrawingBrush = hLinePatternBrush;
			    }
			    else if (this.value === 'square') {
			      	canvas.freeDrawingBrush = squarePatternBrush;
			    }
			    else if (this.value === 'diamond') {
			      	canvas.freeDrawingBrush = diamondPatternBrush;
			    }
			    else if (this.value === 'texture') {
			      	canvas.freeDrawingBrush = texturePatternBrush;
			    }
			    else {
			      	canvas.freeDrawingBrush = new fabric[this.value + 'Brush'](canvas);
			    }

			    if (canvas.freeDrawingBrush) {
			      	canvas.freeDrawingBrush.color = drawingColorEl.value;
			      	canvas.freeDrawingBrush.width = parseInt(drawingLineWidthEl.value, 10) || 1;
			      	canvas.freeDrawingBrush.shadowBlur = parseInt(drawingShadowWidth.value, 10) || 0;
			    }
			};

			drawingColorEl.onchange = function() {
				canvas.freeDrawingBrush.color = this.value;
			};
			drawingShadowColorEl.onchange = function() {
			    canvas.freeDrawingBrush.shadowColor = this.value;
			};
			drawingLineWidthEl.onchange = function() {
			    canvas.freeDrawingBrush.width = parseInt(this.value, 10) || 1;
			    this.previousSibling.innerHTML = this.value;
			};
			drawingShadowWidth.onchange = function() {
			    canvas.freeDrawingBrush.shadowBlur = parseInt(this.value, 10) || 0;
			    this.previousSibling.innerHTML = this.value;
			};
			drawingShadowOffset.onchange = function() {
			    canvas.freeDrawingBrush.shadowOffsetX =
			    canvas.freeDrawingBrush.shadowOffsetY = parseInt(this.value, 10) || 0;
			    this.previousSibling.innerHTML = this.value;
			};

			if (canvas.freeDrawingBrush) {
			    canvas.freeDrawingBrush.color = drawingColorEl.value;
			    canvas.freeDrawingBrush.width = parseInt(drawingLineWidthEl.value, 10) || 1;
			    canvas.freeDrawingBrush.shadowBlur = 0;
			}*/
					
		</script>
	</body>
</html>